<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo Báo Giá - Hướng Dẫn Có Chú Thích</title>
    <!-- Các thư viện CSS và Font -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Arial&display=swap" rel="stylesheet">

    <!-- Các thư viện JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        .container {
            max-width: 90%;
            margin: 1rem auto;
            background: white;
            padding: 0;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            border-radius: 0.375rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 20px;
            border-bottom: 1px solid #ccc;
        }

        .header-left h1 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
        }

        .header-left h2 {
            font-size: 14px;
            font-style: italic;
            margin-bottom: 5px;
            text-align: center;
        }

        .header-left p {
            font-size: 11px;
            margin: 5px 0;
            display: flex;
            align-items: center;
        }

        .header-left p strong {
            width: 40px;
        }

        .header-left p input {
            flex-grow: 1;
            border: none;
            border-bottom: 1px dotted #999;
            padding: 2px 4px;
            font-weight: bold;
        }

        .header-right {
            text-align: right;
        }

        .logo {
            width: 150px;
            height: 150px;
            border-radius: 10px;
            margin-bottom: 10px;
            object-fit: cover;
        }

        .info-section {
            display: flex;
            padding: 20px;
            border-bottom: 1px solid #ccc;
            gap: 20px;
        }

        .info-left {
            flex: 1;
            background: #E8F5E8;
            padding: 15px;
            border-radius: 5px;
        }

        .info-right {
            width: 35%;
            background: #E8F5E8;
            padding: 15px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
        }

        .info-right h3 {
            text-align: center;
            background: none;
            color: #8EC14A;
            padding: 0;
            margin: 0 0 10px 0;
            border-radius: 0;
            font-size: 14px;
            font-weight: bold;
        }

        .info-right-body {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            gap: 10px;
        }

        .info-details-col {
            flex: 1;
        }

        .qr-code-col {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-code {
            width: 60px;
            height: 60px;
            border-radius: 5px;
            object-fit: cover;
            cursor: pointer;
        }

        .info-row {
            display: flex;
            align-items: flex-start;
            margin: 5px 0;
            font-size: 11px;
        }

        .info-row .info-label {
            width: 80px;
            font-weight: bold;
            flex-shrink: 0;
            padding-top: 2px;
        }

        .info-row .info-value {
            flex: 1;
        }

        .info-row input[type="text"] {
            width: 100%;
            border: none;
            background: transparent;
            border-bottom: 1px dotted #999;
            padding: 2px 4px;
        }

        .info-right .info-label {
            width: 65px;
        }

        .products-section {
            padding: 10px;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0;
            font-size: 10px;
        }

        .product-table th {
            background: #8EC14A;
            color: white;
            padding: 8px 4px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #2E7D32;
            font-size: 9px;
            vertical-align: middle;
        }

        .product-table td {
            padding: 2px;
            text-align: center;
            border: 1px solid #8EC14A;
            background: #F1F8E9;
            vertical-align: middle;
        }

        .product-table input {
            width: 100%;
            border: none;
            background: transparent;
            padding: 4px;
            text-align: center;
        }

        .product-table input.text-right {
            text-align: right;
        }

        .product-table .product-code {
            text-align: left;
        }

        .shipping-fee-row td {
            background-color: #e2f0d9;
            font-weight: bold;
        }

        .group-header td {
            background-color: #d1e7dd !important;
            color: #0f5132;
            font-weight: bold;
            text-align: left;
            padding: 6px 10px !important;
        }

        .footer-section {
            display: flex;
            padding: 10px;
            gap: 20px;
        }

        .footer-left,
        .footer-right {
            flex: 1;
        }

        .product-image {
            width: auto;
            height: auto;
            border: 2px solid #ccc;
            border-radius: 10px;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 11px;
            margin-bottom: 10px;
            cursor: pointer;
            object-fit: cover;
        }

        .notes {
            font-size: 10px;
            line-height: 1.4;
            background: #E8F5E8;
            padding: 15px;
            border-radius: 5px;
        }

        .notes p {
            margin: 5px 0;
            display: flex;
        }

        .notes strong {
            width: 110px;
            flex-shrink: 0;
        }

        .notes input {
            flex-grow: 1;
            border: none;
            background: transparent;
            border-bottom: 1px dotted #999;
        }

        .totals-container {
            width: 100%;
            margin-bottom: 20px;
        }

        .total-line {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            font-size: 11px;
            align-items: center;
        }

        .total-line .label {
            font-weight: bold;
        }

        .total-line .value {
            text-align: right;
            min-width: 100px;
            font-weight: bold;
        }

        .total-line .value#amount-in-words {
            font-style: italic;
            font-weight: normal;
        }

        .totals-container hr {
            border: 0;
            border-top: 1px solid #ccc;
            margin: 5px 0;
        }

        .company-info-footer {
            background: #E8F5E8;
            padding: 15px;
            border-radius: 5px;
            font-size: 10px;
            line-height: 1.4;
        }

        .company-info-footer h4 {
            color: #8EC14A;
            margin-bottom: 5px;
            font-size: 11px;
        }

        .signatures {
            display: flex;
            justify-content: space-around;
            text-align: center;
            padding: 20px 20px 30px 20px;
        }

        .signature-box {
            padding: 15px;
            border: 1px dashed #ccc;
            width: 150px;
            height: 80px;
            font-size: 10px;
            font-weight: bold;
        }

        .suggestion-box {
            position: absolute;
            z-index: 1000;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-height: 250px;
            overflow-y: auto;
        }

        .suggestion-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .suggestion-box li {
            padding: 8px 12px;
            cursor: pointer;
        }

        .suggestion-box li:hover {
            background-color: #f0f0f0;
        }

        .suggestion-box li .f-key-hint {
            font-size: 0.8rem;
            font-weight: bold;
            color: #fff;
            background-color: #2563eb;
            border-radius: 5px;
            padding: 3px 8px;
            margin-left: 12px;
            box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.4);
        }

        /* CSS cho chú thích */
        .annotation {
            font-size: 0.75rem;
            color: #4a5568;
            background: #e8f5e8;
            padding: 4px 8px;
            border-radius: 4px;
            margin-top: 4px;
            display: inline-block;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #2d3748;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 5px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        @media print {

            .no-print,
            .annotation,
            .tooltip-text {
                display: none !important;
            }

            body {
                background-color: white;
                padding: 0;
            }

            .container {
                margin: 0;
                box-shadow: none;
                border-radius: 0;
            }
        }
    </style>
</head>

<body>
    <!-- CÁC TRƯỜNG DỮ LIỆU ẨN -->
    <input type="hidden" id="quote-id-input" value="">
    <input type="hidden" id="company-id-input" value="">
    <input type="hidden" id="contact-id-input" value="">
    <input type="hidden" id="project-id-input" value="">
    <div class="annotation no-print">Các trường ẩn lưu trữ ID của báo giá, công ty, người liên hệ, và dự án để kết nối
        với cơ sở dữ liệu.</div>

    <!-- THANH CÔNG CỤ -->
    <div class="no-print bg-white py-3 px-4 shadow-md sticky top-0 z-50 flex justify-between items-center mb-4">
        <div class="tooltip">
            <h2 id="page-title" class="text-2xl font-bold text-gray-800">Tạo Báo Giá Mới</h2>
            <span class="tooltip-text">Tiêu đề thay đổi thành "Chỉnh Sửa Báo Giá" nếu bạn đang chỉnh sửa báo giá hiện
                có.</span>
        </div>
        <div class="flex items-center gap-4">
            <div>
                <label for="quote-status-select" class="font-bold text-sm">Trạng thái:</label>
                <select id="quote-status-select"
                    class="bg-white border border-gray-300 rounded-md py-1 px-2 text-sm font-bold">
                    <option value="Mới tạo">Mới tạo</option>
                    <option value="Đấu thầu">Đấu thầu</option>
                    <option value="Đàm phán">Đàm phán</option>
                    <option value="Chốt">Chốt</option>
                    <option value="Tạch">Tạch</option>
                </select>
                <div class="annotation no-print">Chọn trạng thái báo giá (Mới tạo, Đấu thầu, Đàm phán, Chốt, Tạch).
                    Không thể chỉnh sửa nếu trạng thái là "Chốt" hoặc "Tạch". Nhấn Tab để chuyển sang trường tiếp theo.
                </div>
            </div>
            <div>
                <label for="price-schema" class="font-bold text-sm">Cơ chế giá:</label>
                <select id="price-schema"
                    class="bg-white border border-gray-300 rounded-md py-1 px-2 text-sm font-bold">
                    <option value="">Đang tải...</option>
                </select>
                <div class="annotation no-print">Chọn cơ chế giá để áp dụng đơn giá phù hợp (p0, p1,...). Đơn giá sản
                    phẩm sẽ tự động cập nhật. Nhấn Tab để chuyển sang nút Lưu.</div>
            </div>
            <div class="flex items-center space-x-2">
                <div class="tooltip">
                    <button id="save-quote-btn"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-save mr-2"></i>Lưu
                    </button>
                    <span class="tooltip-text">Lưu báo giá vào hệ thống. Phải nhập số báo giá và ít nhất một sản
                        phẩm.</span>
                </div>
                <div class="tooltip">
                    <button id="export-pdf-btn"
                        class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-file-pdf mr-2"></i>Xuất PDF
                    </button>
                    <span class="tooltip-text">Xuất báo giá dưới dạng PDF. Phải lưu trước khi xuất.</span>
                </div>
                <div class="tooltip">
                    <button id="export-excel-btn"
                        class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-file-excel mr-2"></i>Xuất Excel
                    </button>
                    <span class="tooltip-text">Xuất báo giá dưới dạng Excel. Phải lưu trước khi xuất.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="printable-quote-area">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>QUOTATION</h1>
                <h2>BÁO GIÁ</h2>
                <h2>KIÊM XÁC NHẬN ĐẶT HÀNG</h2>
                <p><strong>Số:</strong> <input size="50%" type="text" id="quote-number-input"
                        placeholder="3iG/P...(Tự động)">
                    <span class="annotation no-print">Số báo giá tự động tạo dựa trên tên công ty, cơ chế giá, và ngày
                        báo giá. Nhấn Tab để chuyển sang Ngày.</span>
                </p>
                <p><strong>Ngày:</strong> <input type="text" id="quote_date" placeholder="dd/mm/yyyy">
                    <span class="annotation no-print">Nhập ngày báo giá, mặc định là ngày hiện tại. Nhấn Tab để chuyển
                        sang Gửi tới, Shift + Tab để quay lại Số.</span>
                </p>
            </div>
            <div class="header-right">
                <div class="tooltip">
                    <img src="logo.png" alt="Logo Công ty" class="logo">
                    <span class="tooltip-text">Logo công ty. Nhấn để tải lên logo mới.</span>
                </div>
            </div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <div class="info-left">
                <div class="info-row">
                    <span class="info-label">Gửi tới:</span>
                    <div class="info-value"><input type="text" id="customer-name-input"
                            placeholder="Gõ để tìm công ty..."></div>
                    <div class="annotation no-print">Nhập tên công ty, hệ thống gợi ý khách hàng. Nhấn F1-F12 để chọn
                        hoặc nhập thủ công. Nhấn Tab để chuyển sang Địa chỉ, Shift + Tab để quay lại Ngày.</div>
                </div>
                <div class="info-row">
                    <span class="info-label">Địa chỉ:</span>
                    <div class="info-value"><input type="text" id="customer-address-input"
                            placeholder="Địa chỉ công ty"></div>
                    <div class="annotation no-print">Tự động điền khi chọn khách hàng, hoặc nhập thủ công. Nhấn Tab để
                        chuyển sang Người nhận, Shift + Tab để quay lại Gửi tới.</div>
                </div>
                <div class="info-row">
                    <span class="info-label">Người nhận:</span>
                    <div class="info-value" style="display: flex; gap: 10px;">
                        <input type="text" id="recipient-name-input" placeholder="Tên người nhận" style="flex: 1;">
                        <span class="info-label" style="width: auto;">Di động:</span>
                        <input type="text" id="recipient-phone-input" placeholder="SĐT người nhận" style="flex: 1;">
                    </div>
                    <div class="annotation no-print">Tự động điền khi chọn khách hàng, hoặc nhập thủ công. Nhấn Tab để
                        chuyển giữa Tên và SĐT, Shift + Tab để quay lại Địa chỉ.</div>
                </div>
                <div class="info-row">
                    <span class="info-label">Hạng mục:</span>
                    <div class="info-value"><input type="text" id="category-input" value="Gối đỡ PU & Cùm Ula 3i-Fix">
                    </div>
                    <div class="annotation no-print">Mặc định là "Gối đỡ PU & Cùm Ula 3i-Fix", có thể chỉnh sửa. Nhấn
                        Tab để chuyển sang Dự án, Shift + Tab để quay lại SĐT.</div>
                </div>
                <div class="info-row">
                    <span class="info-label">Dự án:</span>
                    <div class="info-value"><input type="text" id="project-name-input" placeholder="Gõ để tìm dự án...">
                    </div>
                    <div class="annotation no-print">Nhập mã/tên dự án, hệ thống gợi ý dự án. Nhấn F1-F12 để chọn. Nhấn
                        Tab để chuyển sang Ng.báo giá, Shift + Tab để quay lại Hạng mục.</div>
                </div>
            </div>
            <div class="info-right">
                <h3>3iGREEN</h3>
                <div class="info-right-body">
                    <div class="info-details-col">
                        <div class="info-row">
                            <span class="info-label">Ng.báo giá:</span>
                            <div class="info-value"><input type="text" id="quote-person-input"></div>
                            <div class="annotation no-print">Tên người lập báo giá, mặc định là thông tin người dùng
                                đăng nhập. Nhấn Tab để chuyển sang Chức vụ, Shift + Tab để quay lại Dự án.</div>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Chức vụ:</span>
                            <div class="info-value"><input type="text" id="position-input"></div>
                            <div class="annotation no-print">Chức vụ của người lập báo giá. Nhấn Tab để chuyển sang Di
                                động, Shift + Tab để quay lại Ng.báo giá.</div>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Di động:</span>
                            <div class="info-value"><input type="text" id="mobile-input"></div>
                            <div class="annotation no-print">Số điện thoại liên hệ của người lập báo giá. Nhấn Tab để
                                chuyển sang Hiệu lực, Shift + Tab để quay lại Chức vụ.</div>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Hiệu lực:</span>
                            <div class="info-value"><input type="text" id="quote-validity-input"
                                    value="20 ngày kể từ ngày báo giá"></div>
                            <div class="annotation no-print">Thời hạn hiệu lực của báo giá, mặc định 20 ngày. Nhấn Tab
                                để chuyển sang bảng PUR, Shift + Tab để quay lại Di động.</div>
                        </div>
                    </div>
                    <div class="qr-code-col">
                        <input type="file" id="qr-upload-input" class="hidden" accept="image/*">
                        <input type="hidden" id="qr-path" value="">
                        <div class="tooltip">
                            <img id="qr-preview" src="Uploads/qr.png" alt="QR Code" class="qr-code"
                                title="Nhấn để đổi ảnh QR">
                            <span class="tooltip-text">QR code liên hệ. Nhấn để tải lên hình mới.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div class="products-section">
            <!-- Bảng 1: PUR Products -->
            <div class="tooltip">
                <table class="product-table">
                    <thead>
                        <tr>
                            <th rowspan="2" style="width: 3%;">Stt.</th>
                            <th rowspan="2" style="width: 15%;">Mã hàng</th>
                            <th colspan="3">Kích thước PUR (mm)</th>
                            <th rowspan="2" style="width: 5%;">Đơn vị</th>
                            <th rowspan="2" style="width: 7%;">Số lượng</th>
                            <th style="width: 10%;">Đơn giá</th>
                            <th style="width: 12%;">Thành tiền</th>
                            <th rowspan="2">Ghi chú</th>
                            <th rowspan="2" class="no-print" style="width: 3%;"></th>
                        </tr>
                        <tr>
                            <th style="width: 5%;">ID</th>
                            <th style="width: 7%;">(t) Độ dày</th>
                            <th style="width: 7%;">(w) Bản rộng</th>
                            <th>VNĐ</th>
                            <th>VNĐ</th>
                        </tr>
                    </thead>
                    <tbody id="pur-items-bom"></tbody>
                </table>
                <span class="tooltip-text">Bảng sản phẩm PUR. Nhập thông số vào cột "Mã hàng" để tìm sản phẩm, ví dụ:
                    "015 25 40" hoặc "25 40" cho PUR-S 015x25x40. Nhấn Tab để chuyển sang Số lượng, Shift + Tab để quay
                    lại cột trước.</span>
            </div>
            <div class="annotation no-print">Nhập thông số (ID, độ dày, chiều rộng) cách nhau bằng dấu cách vào cột "Mã
                hàng", ví dụ: <code>015 25 40</code>, <code>25 40</code>, hoặc <code>40 015</code> để tìm sản phẩm PUR-S
                015x25x40. Nhấn F1-F12 để chọn từ gợi ý. Nhấn Tab để chuyển sang Số lượng, Shift + Tab để quay lại Mã
                hàng.</div>

            <!-- Bảng 2: ULA Products -->
            <div class="tooltip">
                <table class="product-table">
                    <thead>
                        <tr>
                            <th rowspan="2" style="width: 3%;">Stt.</th>
                            <th rowspan="2" style="width: 15%;">Mã hàng</th>
                            <th colspan="3">Kích thước ULA (mm)</th>
                            <th rowspan="2" style="width: 5%;">Đơn vị</th>
                            <th rowspan="2" style="width: 7%;">Số lượng</th>
                            <th style="width: 10%;">Đơn giá</th>
                            <th style="width: 12%;">Thành tiền</th>
                            <th rowspan="2">Ghi chú</th>
                            <th rowspan="2" class="no-print" style="width: 3%;"></th>
                        </tr>
                        <tr>
                            <th style="width: 5%;">ID</th>
                            <th style="width: 7%;">(T) Độ dày</th>
                            <th style="width: 7%;">(L) Bản rộng</th>
                            <th>VNĐ</th>
                            <th>VNĐ</th>
                        </tr>
                    </thead>
                    <tbody id="ula-items-bom"></tbody>
                </table>
                <span class="tooltip-text">Bảng sản phẩm ULA. Nhập thông số vào cột "Mã hàng" để tìm sản phẩm, ví dụ:
                    "m8 015" hoặc "015 m8" cho Ula 015x32-M8. Nhấn Tab để chuyển sang Số lượng, Shift + Tab để quay lại
                    cột trước.</span>
            </div>
            <div class="annotation no-print">Nhập thông số (ID, bản rộng) cách nhau bằng dấu cách vào cột "Mã hàng", ví
                dụ: <code>m8 015</code> hoặc <code>015 m8</code> để tìm sản phẩm Ula 015x32-M8. Nhấn F1-F12 để chọn từ
                gợi ý. Nhấn Tab để chuyển sang Số lượng, Shift + Tab để quay lại Mã hàng.</div>

            <!-- BẢNG PHÍ VẬN CHUYỂN -->
            <div class="tooltip">
                <table class="product-table">
                    <tbody id="shipping-fee-bom">
                        <!-- Dòng phí vận chuyển sẽ được JS thêm vào đây -->
                    </tbody>
                </table>
                <span class="tooltip-text">Nhập số lượng chuyến và đơn giá vận chuyển. Tổng phí sẽ tự động cập nhật.
                    Nhấn Tab để chuyển giữa các trường, Shift + Tab để quay lại trường trước.</span>
            </div>

            <div class="mt-2 no-print">
                <div class="tooltip">
                    <button class="px-3 py-1 text-xs bg-gray-600 text-white rounded-md hover:bg-gray-700 shadow-sm"
                        id="add-pur-row-btn">
                        <i class="fas fa-plus-circle mr-2"></i>Thêm dòng PUR
                    </button>
                    <span class="tooltip-text">Thêm một dòng mới vào bảng PUR để nhập sản phẩm. Nhấn Tab để chuyển sang
                        nút Thêm dòng ULA.</span>
                </div>
                <div class="tooltip">
                    <button class="px-3 py-1 text-xs bg-gray-600 text-white rounded-md hover:bg-gray-700 shadow-sm"
                        id="add-ula-row-btn">
                        <i class="fas fa-plus-circle mr-2"></i>Thêm dòng ULA
                    </button>
                    <span class="tooltip-text">Thêm một dòng mới vào bảng ULA để nhập sản phẩm. Nhấn Tab để chuyển sang
                        hình sản phẩm, Shift + Tab để quay lại nút Thêm dòng PUR.</span>
                </div>
            </div>
        </div>

        <div class="footer-section">
            <div class="footer-left">
                <input type="file" id="image-upload-input" class="hidden" accept="image/*">
                <input type="hidden" id="image-path" value="">
                <div class="tooltip">
                    <img id="image-preview" src="Uploads/default_image.png" alt="Hình minh họa sản phẩm"
                        class="product-image" title="Nhấn để đổi ảnh">
                    <span class="tooltip-text">Hình minh họa sản phẩm. Nhấn để tải lên hình mới. Nhấn Tab để chuyển sang
                        Xuất xứ.</span>
                </div>
                <div class="notes">
                    <p><strong>Xuất xứ:</strong> <input type="text" id="origin" value="3iGreen">
                        <span class="annotation no-print">Mặc định là "3iGreen", có thể chỉnh sửa. Nhấn Tab để chuyển
                            sang Thời gian giao hàng, Shift + Tab để quay lại hình sản phẩm.</span>
                    </p>
                    <p><strong>- T.gian giao hàng:</strong> <input type="text" id="delivery-conditions-input"
                            value="3-5 ngày sau khi nhận được xác nhận đặt hàng.">
                        <span class="annotation no-print">Tự động điều chỉnh dựa trên tổng giá trị (3-5 ngày cho đơn
                            20-50 triệu). Nhấn Tab để chuyển sang Điều kiện thanh toán, Shift + Tab để quay lại Xuất
                            xứ.</span>
                    </p>
                    <p><strong>- Điều kiện thanh toán:</strong> <input type="text" id="payment-terms-input"
                            value="Theo thỏa thuận">
                        <span class="annotation no-print">Nhập điều kiện thanh toán, mặc định là "Theo thỏa thuận". Nhấn
                            Tab để chuyển sang Địa điểm giao hàng, Shift + Tab để quay lại Thời gian giao hàng.</span>
                    </p>
                    <p><strong>- Địa điểm giao hàng:</strong> <input type="text" id="delivery-location-input"
                            placeholder="Địa chỉ giao hàng">
                        <span class="annotation no-print">Nhập địa điểm giao hàng cụ thể. Nhấn Tab để chuyển sang trường
                            tiếp theo, Shift + Tab để quay lại Điều kiện thanh toán.</span>
                    </p>
                </div>
            </div>
            <div class="footer-right">
                <div class="totals-container">
                    <div class="total-line">
                        <span class="label">Tổng cộng trước thuế:</span>
                        <span class="value" id="subtotal">0</span>
                    </div>
                    <div class="total-line">
                        <span class="label">VAT 10%:</span>
                        <span class="value" id="vat">0</span>
                    </div>
                    <hr>
                    <div class="total-line">
                        <span class="label">Tổng tiền sau thuế:</span>
                        <span class="value" id="total">0</span>
                    </div>
                    <div class="total-line">
                        <span class="label">Bằng chữ:</span>
                        <span class="value" id="amount-in-words">-</span>
                    </div>
                    <div class="annotation no-print">Tổng tiền và số tiền bằng chữ tự động cập nhật khi thay đổi số
                        lượng hoặc đơn giá.</div>
                </div>
                <div class="company-info-footer">
                    <h4>CÔNG TY TNHH SẢN XUẤT VÀ ỨNG DỤNG VẬT LIỆU XANH 3I</h4>
                    <p>Địa chỉ: Số 14 Lô D31 - BT12 tại khu D, KĐT Mới Hai Bên Đường Lê Trọng Tấn, Phường Dương Nội,
                        Quận Hà Đông, TP. Hà Nội</p>
                    <p><strong>MST:</strong> 0110886479</p>
                    <p><strong>Thông tin chuyển khoản:</strong></p>
                    <p>Chủ tài khoản: Công ty TNHH sản xuất và ứng dụng vật liệu xanh 3i</p>
                    <p>Số tài khoản: 46668888, Ngân hàng TMCP Hàng Hải Việt Nam (MSB) - chi nhánh Thanh Xuân</p>
                    <div class="annotation no-print">Thông tin công ty cố định, hiển thị trên báo giá khi in.</div>
                </div>
            </div>
        </div>

        <!-- Signatures Section -->
        <div class="signatures">
            <div class="signature-box">Đại diện mua hàng
                <div class="annotation no-print">Chữ ký của khách hàng khi xác nhận đặt hàng.</div>
            </div>
            <div class="signature-box">Đại diện bán hàng
                <div class="annotation no-print">Chữ ký của người lập báo giá (3iGreen).</div>
            </div>
        </div>
    </div>

    <!-- HỘP GỢI Ý -->
    <div id="product-suggestion-box" class="suggestion-box hidden">
        <div class="annotation no-print">Hộp gợi ý sản phẩm xuất hiện khi nhập thông số vào cột "Mã hàng". Nhấn F1-F12
            hoặc nhấp để chọn. Nhấn Esc để ẩn.</div>
    </div>
    <div id="customer-suggestion-box" class="suggestion-box hidden">
        <div class="annotation no-print">Hộp gợi ý khách hàng xuất hiện khi nhập tên công ty. Nhấn F1-F12 hoặc nhấp để
            chọn. Nhấn Esc để ẩn.</div>
    </div>
    <div id="project-suggestion-box" class="suggestion-box hidden">
        <div class="annotation no-print">Hộp gợi ý dự án xuất hiện khi nhập mã/tên dự án. Nhấn F1-F12 hoặc nhấp để chọn.
            Nhấn Esc để ẩn.</div>
    </div>
</body>

</html>